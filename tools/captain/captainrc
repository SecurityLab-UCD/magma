###
## Configuration parameters
###

# WORKDIR: path to directory where shared volumes will be created
WORKDIR=./workdir

# REPEAT: number of campaigns to run per program (per fuzzer)
REPEAT=1

# [WORKER_MODE]: defines the type of CPU resources to allocate (default: 1)
# - 1: logical cores (possibly SMT-enabled)
# - 2: physical cores
# - 3: physical sockets (1 worker per CPU socket)
WORKER_MODE=1

# [WORKERS]: number of worker threads (default: all cores)

# [WORKER_POOL]: a space-separated list of logical cores to allocate
# WORKER_POOL="0 1 2 3 6 7 9 11 13 14 15 16 18 19 20 31 32 33 34 35 36 39 40 41 42 43 44 45 46 47 48 49 50 51 52 53 54 55 56 57 59 61 62 63 64 65 66 67 68 69 70 72 73 74 75 77 78 79"

# [CAMPAIGN_WORKERS]: number of workers to allocate for a campaign (default: 1)
CAMPAIGN_WORKERS=30

# [TIMEOUT]: time to run each campaign. This variable supports one-letter
# suffixes to indicate duration (s: seconds, m: minutes, h: hours, d: days)
# (default: 1m)
TIMEOUT=24h

# [POLL]: time (in seconds) between polls (default: 5)
POLL=5

# [CACHE_ON_DISK]: if set, the cache workdir is mounted on disk instead of
# in-memory (default: unset)
# CACHE_ON_DISK=1

# [NO_ARCHIVE]: if set, campaign workdirs will not be tarballed (default: unset)
# NO_ARCHIVE=1

# [TMPFS_SIZE]: the size of the tmpfs mounted volume. This only applies when
# CACHE_ON_DISK is not set (default: 50g)
# TMPFS_SIZE=16g

# [MAGMA]: path to magma root (default: ../../)
# MAGMA=/path/to/magma/

# [CANARY_MODE]: defines the mode of canaries at compile time (default: 1)
# - 1: without fixes, with canaries
# - 2: without fixes, without canaries
# - 3: with fixes, without canaries
# CANARY_MODE=3

# [ISAN]: if set, build the benchmark with ISAN/fatal canaries (default: unset)
ISAN=1

# [HARDEN]: if set, build the benchmark with hardened canaries (default: unset)
# HARDEN=1

# [POC_EXTRACT]: if set, run the extract.sh script after the campaign is done
# (default: unset)
# POC_EXTRACT=1


###
## Campaigns to run
###

# FUZZERS: an array of fuzzer names (from magma/fuzzers/*) to evaluate 
# aflpp_llm honggfuzz
FUZZERS=(aflpp_llm)

# [fuzzer_TARGETS]: an array of target names (from magma/targets/*) to fuzz with
# `fuzzer`. The `fuzzer` prefix is a fuzzer listed in the FUZZERS array
# (default: all targets) libpng libsndfile libtiff libxml2 lua openssl php poppler sqlite3
aflpp_llm_TARGETS=(libxml2)

# [fuzzer_target_PROGRAMS]: an array of program names (from
# magma/targets/target/configrc) to use as execution drivers when fuzzing the
# `target` tiff_read_rgba_fuzzer 
aflpp_llm_libxml2_PROGRAMS=(libxml2_xml_read_memory_fuzzer)
# aflplusplus_libpng_PROGRAMS=(libpng_read_fuzzer)
# aflplusplus_libtiff_PROGRAMS=(tiff_read_rgba_fuzzer tiffcp)
# aflplusplus_libxml2_PROGRAMS=(libxml2_xml_read_memory_fuzzer xmllint)
# aflplusplus_openssl_PROGRAMS=(asn1 asn1parse bignum server client x509)
# aflplusplus_php_PROGRAMS=(json exif unserialize parser)
# aflplusplus_poppler_PROGRAMS=(pdf_fuzzer pdfimages pdftoppm)
# aflplusplus_sqlite3_PROGRAMS=(sqlite3_fuzz)

# [fuzzer_target_FUZZARGS]: a string containing fuzzer/target-specific arguments
# when fuzzing `target` with `fuzzer`
# afl_libpng_FUZZARGS="-x /magma_shared/png.dict"

# [fuzzer_CAMPAIGN_WORKERS]: overrides the global CAMPAIGN_WORKERS setting
# afl_CAMPAIGN_WORKERS=3
